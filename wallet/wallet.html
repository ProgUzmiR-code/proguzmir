<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            background: #06121a;
            color: white;
            font-family: sans-serif;
            padding: 0;
            box-sizing: border-box;
        }

        .wallet {
            margin-top: 48px;

            h1 {
                font-size: 24px;
                text-align: center;
                color: #ffd700;
            }
        }

        header .flex {
            display: flex;
            align-items: center;
            gap: 2px;
            font-size: 25px;
        }

        .coins-center {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        ul {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            gap: 10px;
            padding: 0;
        }

        ul li {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            align-items: center;
            padding: 10px 20px 10px 20px;
            list-style: none;
        }

        .invite-listm2,
        .invite-listm,
        .invitem {
            overflow-x: hidden;
        }

        .checked {
            color: #ffd700;
            border-bottom: 2px solid #ffffff;
        }

        .invite-listm3 {
            margin: 50%;
            justify-content: center;
            align-items: center;
            gap: 5px;
        }

        .invite-listm2 .ds {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .ds2 {
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .tab_mainm1 {
            display: flex;
        }

        .invite-listm2 .ds button {
            background-color: #ffd700;
            border: none;
            border-radius: 10px;
            height: 30px;
            width: 120px;
        }

        .Withdraw,
        .Recharge {
            text-align: center;
            background-color: #ffffff;
            color: black;
            border: none;
            border-radius: 0px 5px 5px 0px;
            height: 25px;
            width: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            overflow-x: hidden;
        }

        .Recharge {
            border-radius: 5px 0px 0px 5px;
        }

        .Active {
            background-color: #ffd700;
            color: black;
        }

        .q-mt-sm {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 300px;
        }

        .bton:active {
            color: white;

        }
    </style>

    <title>Document</title>
</head>

<body>
    <header>
        <div class="wallet">
            <h1>Wallet Page</h1>
        </div>
        <div class="coins-center">
            <div class="flex">
                üíé<span id="diamondCount">0</span>
            </div>
        </div>
    </header>
    <div class="invitem">
        <div class="tab_mainm">
            <ul>
                <li class="tab_itemm " data-target="completed">Withdraw</li>
                <li class="tab_itemm " data-target="inactive">Recharge</li>
                <li class="tab_itemm checked" data-target="active">Records</li>
            </ul>
        </div>


        <div class="der">

            <div class="invite-listm3" style="display: none;">
                <span>Withdraw</span>
                <span>soon</span>
            </div>


            <div class="invite-listm" style="display: none;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="shop-card"
                        style="background: #f3c178; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; align-items: center; border: 2px solid #e2a04a; position: relative;">

                        <div
                            style="position: absolute; top: 5px; left: 5px; background: #ff4d4d; color: white; font-size: 10px; padding: 2px 8px; border-radius: 20px; border: 1px solid white; font-weight: bold; display: flex; align-items: center; gap: 3px;">
                            <span style="font-size: 8px;">First</span> üíé ${it.bonus}
                        </div>

                        <img src="${it.img}"
                            style="width: 70%; margin-top: 30px; margin-bottom: 10px; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.2));">

                        <div style="font-weight: 900; color: #3a7994; font-size: 18px; margin-bottom: 5px;">${it.name}
                        </div>

                        <div
                            style="background: #e69a30; width: 100%; text-align: center; padding: 8px 0; color: white; font-weight: bold; border-top: 2px solid #d48a20; cursor: pointer;">
                            ${it.cost}
                        </div>
                    </div>
                </div>
            </div>

            <div class="invite-listm2" style="display: block;">
                <div>
                    <div class="ds">
                        <span>Your TON address</span>
                        <button class="bton" tabindex="0" type="button" style="font-size: 14px;">
                            <span>
                                <i aria-hidden="true" style="display: none;"
                                    role="presentation">account_balance_wallet</i>
                                Connect Wallet
                            </span>
                        </button>
                    </div>
                    <div class="ds2">
                        <span>Recharge Record</span>
                        <div class="tab_mainm1 w1">
                            <div class="Recharge tab_itemm1 w2 Active" data-target="recharge" style="font-size: 14px;">
                                Recharge</div>
                            <div class="Withdraw tab_itemm1 w2" data-target="withdraw" style="font-size: 14px;">Withdraw
                            </div>
                        </div>

                    </div>
                    <div class="invite-listm4">
                        <span class="q-mt-sm">No transaction records</span>
                    </div>
                    <div class="invite-listm5" style="display: none;">
                        <span class="q-mt-sm">No transaction records</span>
                    </div>
                </div>
            </div>


        </div>

    </div>
    <script>
        // Update diamond display
        function updateDiamondDisplay() {
            const diamondCount = document.getElementById('diamondCount');
            if (diamondCount) {
                try {
                    // Load state from localStorage (same as index.js)
                    const KEY_DIAMOND = "proguzmir_diamond";
                    const KEY_WALLET = "proguzmir_wallet";

                    function makeUserKey(baseKey, wallet) {
                        return wallet ? baseKey + "_" + wallet.toLowerCase() : baseKey + "_guest";
                    }

                    const wallet = localStorage.getItem(KEY_WALLET) || "";
                    const keyDiamond = makeUserKey(KEY_DIAMOND, wallet);
                    const diamond = parseInt(localStorage.getItem(keyDiamond) || "0", 10);

                    diamondCount.textContent = diamond;
                } catch (e) {
                    console.log("Diamond load error:", e);
                }
            }
        }

        // Update on page load
        updateDiamondDisplay();

        // Update every second to catch changes
        setInterval(updateDiamondDisplay, 1000);
    </script>
    <script>
        document.addEventListener('click', function (e) {

            const tab = e.target.closest('.tab_itemm, .tab_itemm1, .w2');
            if (!tab) return;

            const status = tab.dataset.target?.toLowerCase();
            if (!status) return;

            /* ===== TAB MAIN M (1-sistema) ===== */
            if (tab.closest('.tab_mainm')) {

                document
                    .querySelectorAll('.tab_mainm .tab_itemm, .tab_mainm .tab_itemm1')
                    .forEach(t => t.classList.remove('checked'));

                tab.classList.add('checked');

                document.querySelectorAll('.invitem').forEach(inviteBlock => {

                    const lists = {
                        inactive: inviteBlock.querySelector('.invite-listm'),
                        active: inviteBlock.querySelector('.invite-listm2'),
                        completed: inviteBlock.querySelector('.invite-listm3'),
                    };

                    Object.values(lists).forEach(l => l && (l.style.display = 'none'));

                    if (lists[status]) {
                        lists[status].style.display =
                            status === 'completed' ? 'flex' : 'block';
                    }
                });

                return; // ‚ùó BU YERDA TO‚ÄòXTAYDI
            }

            /* ===== W1 / DER (2-sistema) ===== */
            if (tab.closest('.der')) {

                document
                    .querySelectorAll('.der .w2')
                    .forEach(t => t.classList.remove('Active'));

                tab.classList.add('Active');

                document.querySelectorAll('.der').forEach(derBlock => {

                    const lists = {
                        recharge: derBlock.querySelector('.invite-listm4'),
                        withdraw: derBlock.querySelector('.invite-listm5'),
                    };

                    Object.values(lists).forEach(l => l && (l.style.display = 'none'));

                    if (lists[status]) {
                        lists[status].style.display = 'block';
                    }
                });

                return; // ‚ùó BOSHQA BLOKLARGA O‚ÄòTMAYDI
            }
        });
    </script>
    <script>
        // show Telegram BackButton and set it to return to main renderGame
        showTelegramBack(() => { showheader(); renderGame(); });
        // hide bottom nav and enable Telegram Back to return to game
        hideheader();
        showTelegramBack(() => { hideTelegramBack(); showheader(); renderGame(); });
        // back handler
        document.getElementById('keyBack').addEventListener('click', () => { hideTelegramBack(); showNav(); renderGame(); });
        // helpers to hide/show bottom header
        function hideheader() { const nav = document.querySelector('.header'); if (nav) nav.style.display = 'none'; }
        function showheader() { const nav = document.querySelector('.header'); if (nav) nav.style.display = ''; }
    </script>
    <script>
  let session = null

  async function handleConnect() {
    // universalConnector is the universal connector instance from the implementation section
    if (!universalConnector) {
      return
    }

    const { session: providerSession } = await universalConnector.connect()
    session = providerSession
  }

  async function handleDisconnect() {
    if (!universalConnector) {
      return
    }
    await universalConnector.disconnect()
    session = null
  }

  document.getElementById('open-connect-modal').addEventListener('click', handleConnect)
  document.getElementById('disconnect').addEventListener('click', handleDisconnect)
</script>
</body>

</html>